# https://hant-kb.kutu66.com/makefile/post_3735903
# GNU/Linux specific Make directives.

# Declare tools.
SHELL =/bin/sh
CC = sdcc 
LD = gplink 
ECHO = @echo

MCU = 16f88
ARCH = pic14

CFLAGS = -m$(ARCH) -p$(MCU) 
LDFLAGS = -c -r -w -m I/usr/share/sdcc/lib/$(ARCH)/

EXECUTABLE = t1

SOURCES = test2.c 
OBJECTS = $(SOURCES:.c=.o)
	CLEANFILES = test2.o test2.asm test2.map test2.lst

.SUFFIXES:. c. o
.PHONY: clean

# Compile
all: $(EXECUTABLE)

.c.o:
	$(AT) $(CC) $(CFLAGS) -o $*.o -c $<

$(EXECUTABLE): $(OBJECTS)
	$(AT) $(LD) $(LDFLAGS) $(OBJECTS) -o $(EXECUTABLE)

clean:
	$(AT) rm -rf $(CLEANFILES)

